<% provide(:title, 'Aktive tilbud') %>
<% provide(:description, 'Liste over aktive tilbud') %>

<div style="width:100%;height:100%;border-style:none;"><%= gmaps("markers" => {"data" => @json, "options" => {"custom_infowindow_class" => "infobox-wrapper", 
    "list_container" => "list_items" } }) %> </div>
<br/>

<div>
<ul id="list_items">
</ul>

<h1>Alternativ liste</h1>
<div class="span11">
    <table id="sample-table-1" class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <th>Butik</th>
                <th>Ejer</th>
                <th>Gade</th>
                <th>Husnummer</th>
                <th>Postnummer</th>
                <th>By</th>
                <th>Telefon</th>

            </tr>
        </thead>
        <tbody>
            <% @merchant_stores.each do |merchant_store| %>
            <tr>
                <td ><%= link_to merchant_store.store_name, "javascript:void(0)", id: "merchant-" + merchant_store.id.to_s %></td>
                <td><%= merchant_store.owner %></td>
                <td><%= merchant_store.street %></td>
                <td><%= merchant_store.house_number %></td>
                <td><%= merchant_store.postal_code %></td>
                <td><%= merchant_store.city %></td>
                <td><%= merchant_store.phone %></td>
            </tr>
            <% end %>
        </tbody>
    </table>
</div>

</div>
<div id="fb-root"></div>
<% content_for :scripts do %>
<script type="text/javascript">
    jQuery(document).ready(function() {
        App.init();
    });

    (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/da_DK/all.js#xfbml=1&appId=155627067978522";
            fjs.parentNode.insertBefore(js, fjs);
    }
    (document, 'script', 'facebook-jssdk'));

   Gmaps.map.infobox = function(boxText) {
  return {
     content: boxText
    ,disableAutoPan: false
    ,maxWidth: 0
    ,pixelOffset: new google.maps.Size(-140, 0)
    ,zIndex: null
    ,boxStyle: {
      background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/examples/tipbox.gif') no-repeat"
      ,opacity: 1.0
      ,width: "300px"
       }
    ,closeBoxMargin: "10px 2px 2px 2px"
    ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
    ,infoBoxClearance: new google.maps.Size(1, 1)
    ,isHidden: false
    ,pane: "floatPane"
    ,enableEventPropagation: false
 }};
</script> 
<% end %>





