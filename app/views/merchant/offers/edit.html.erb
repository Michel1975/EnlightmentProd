<% provide(:title, 'Rediger tilbud') %>
<% provide(:description, 'Redigering af tilbud') %>
<% content_for :breadcrumps do %>
  <li>
    Tilbud
    <span class="divider">
      <i class="icon-angle-right arrow-icon"></i>
    </span>
  </li>
  <li class="active">Rediger tilbud</li>
<% end %>
<h3 class="header blue lighter smaller">
  <i class="icon-user bigger-110"></i>
  Redigering af tilbud
</h3>
<div class="row-fluid">
  <div class="span12">
    <%= render 'form' %>
  </div><!-- /.span12 -->
</div><!-- /.row-fluid -->

<%= render :partial => 'tooltip_new' %>

<% content_for :scripts do %>
  <script type="text/javascript">
      jQuery(function($) {
          $('[data-rel=tooltip]').tooltip({container:'body'});
          $('[data-rel=popover]').popover({container:'body'});
      });
  </script>
<% end %>

<%= link_to 'Tilbage', merchant_offers_path %>


<script>
  $(document).ready(function() {
   // Cloudinary jQuery integration library uses jQuery File Upload widget
    // (see http://blueimp.github.io/jQuery-File-Upload/).
    // Any file input field with cloudinary-fileupload class is automatically
    // wrapped using the File Upload widget and configured for Cloudinary uploads.
    // You can further customize the configuration using .fileupload method
    // as we do below.

    $(".cloudinary-fileupload")
      .fileupload({
        // Uncomment the following lines to enable client side image resizing and validation.
        // Make sure cloudinary/processing is included the js file
        //disableImageResize: false,
        //imageMaxWidth: 800,
        //imageMaxHeight: 600,
        //acceptFileTypes: /(\.|\/)(gif|jpe?g|png|bmp|ico)$/i,
        //acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
        //maxFileSize: 20000000, // 20MB
        //maxFileSize: 105000, // 1MB
        //dropZone: "#direct_upload",
        start: function (e) {
          $(".status").text("Starter upload");
        },
        progress: function (e, data) {
          $(".status").text("Uploader... " + Math.round((data.loaded * 100.0) / data.total) + "%");
        },
        fail: function (e, data) {
          $(".status").text("Upload afbrudt");
        }
      })
      .off("cloudinarydone").on("cloudinarydone", function (e, data) {
        $("#offer_offer_picture_size").val(data.result.bytes);
        $(".status").text("");
        $(".preview").html(
          $.cloudinary.image(data.result.public_id, {
            format: data.result.format, width: 200, height: 200, crop: "fit"
          })
        );
      });
    });

</script>
